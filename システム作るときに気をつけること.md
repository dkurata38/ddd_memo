# システム作るときに気をつけること

## 技術駆動ではなくドメイン駆動

一旦、プログラミングとかどうでもいい。
主の使いたい技術とかどうでもいい。

## 静的型検査で

なるべく小さい範囲で完結させる

## 入力・加工・出力

## 依存


汎用クラス
 groupingByCollector
 enumLookup
 range

JavaDoc

パッケージ分け

Collectionの扱い

日付の計算・金額の計算など重要処理は計算モデルをクラスとして定義
DBに依存しない形にしてテストをしっかりやる

読み取り専用のMapperと書き込み用のMapper

Type Safe Configuration

ワンタイムトークンによるなりすましログイン

単一アプリケーションで複数のロールによるログイン
ロールによる機能の制限

環境構築の自動化
→Terraform
scoop
共通化、スコープ、依存性、可視性

命名、文芸的プログラミング
機能と概念の設計



## 概要

1. プログラミング言語で文章を書く

命名

粒度
→ここで考える粒度を揃えると自然に適切なクラスやメソッドに処理実装を委譲するように考えられます


2. 型安全なプログラムを書く

3. モジュールとしての完全性を保つ

4. ドメイン駆動


## モジュールとしての完全性を保つ

### 完全性の考え方

+ 参照透過
+ 呼び出し元に依存しない


### モジュールの性質と完全性を考える

ソフトウェアに依存する業務の実現に関わる
→いわゆるサービス
ソフトウェアに依存しない業務の実現に関わる
→いわゆるドメインロジック
データの永続化に関わる
→いわゆるリポジトリ
画面遷移の制御に関わる
→いわゆるコントローラ

### モジュールの単位

1. ビルド成果物(warやjar)単位
2. パッケージ単位
3. クラス単位
4. メソッド単位

### ビルド成果物単位

モジュール同士を分ける必要があるかを考える
モジュールを依存させる必要があるかを考える

### パッケージ単位

パッケージで割ってコンパイルが通るように考える
→不必要なまでに外部にモジュールを公開しない

例
controllers
└HogeController
└FugaController
forms
└HogeForm
└FugaForm
services
└HogeController
└FugaController


### クラス単位

クラスの命名


### メソッド単位

メソッドの仕様を考える
→このときにJavaDocを記述する
→


入力・加工・出力を意識してプログラムを書く
→入力は引数だけではなく、DBから取得した値も入力です
→もし、入力・加工・出力の順に書くことで入力から出力までの距離が長くなってしまう場合は、関連する入力・出力・加工ごとにメソッドを分けたほうがよい
→加工部分は加工部分だけで別メソッドやクラスを作ったほうがよい。加工がDBからの入力に依存しなければテストしやすくなる

同じ引数なら何回実行しても結果が同じになるようにする
インスタンスメソッドならインスタンス変数も考慮に入れる
→こうすることで継続的な単体テストが可能になる



TRYCODE 74テーブル
VERITAS 147テーブル


カラム追加にどういう風に対応をするか
## 